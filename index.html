<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Slaying the Salmon of Doubt</title>
    <meta name="author" content="Thom Leggett">
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/hp.css" id="theme">
    <link rel="stylesheet" href="css/typography/typography.css">
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <!-- If the query includes 'print-pdf', include the PDF print sheet -->
    <script>
      if( window.location.search.match( /print-pdf/gi ) ) {
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = 'css/print/pdf.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
      }
    </script>

    <!--[if lt IE 9]>
	<script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="reveal">
      <div class="slides">

        <section>
          <div class="middle">
            <div>
              <h1>Slaying the Salmon of Doubt</h1>
              <p>&nbsp;</p>
              <hr/>
              <p>A story about how a team of enterprise developers worked their way upstream. Told first at OpenStack Paris 2014 on the How To Contribute track.</p>
              <hr/>
              <p>&nbsp;</p>
              <h6>Thom Leggett</h6>
              <p>IRC: tteggel</p>
              <p>Twitter: <a href="https://twitter.com/intent/user?user_id=37049955">@thomleg</a></p>
              <p>Email: <a hef="mailto:thom@tteggel.org">thom@tteggel.org</a></p>

            </div>
          </div>

          <footer>
            <a href="http://creativecommons.org/licenses/by-sa/4.0/">This presentation licensed under CC-BY-SA <img src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png"/></a>
          </footer>

       </section>

       <section>
         <div class="middle">
           <div><blockquote>This story is based on actual events. In certain cases incidents, characters and timelines have been changed for dramatic purposes. Certain characters may be composites, or entirely fictitious.</blockquote></div>
         </div>
       </section>

       <section>
         <section>
           <h1>Introductions</h1>

           <div class="middle">
             <img src="salmon1.jpg" title="Atlantic salmon. Salmo salar."/>
           </div>
         </section>

         <section class="middle">
           <div>
             <h1>Nova team</h1>
             <p>(...actually <em>Compute Service</em> is our name.)</p>
           </div>
         </section>

         <section class="middle">
           <h1>13 people</h1>
         </section>

         <section class="middle">
           <div>
             <h1>Product engineering team</h1>
             <p>(...in other words we have ops and support responsibilities too.)</p>
           </div>

           <aside class="notes">
             <ul>
               <li>HP Helion OpenStack, HP Helion Public Cloud, HP Helion OpenStack Community Edition.</li>
             </ul>
           </aside>
         </section>
       </section>

       <section>
         <h1>Interrupt Driven Development</h1>
         <p>(...and the emergence of a sentry.)</p>

         <div class="middle">
           <img src="salmon-sentry.jpg" width="45%"/>
         </div>

         <aside class="notes">
           <ul>
             <li><ul>
                 <li>Engineers have multiple (&gt; 5) tasks on the go.</li>
                 <li>Support work is handled by one individual</li>
                 <li>Dev/Test environments frequently down.</li>
             </ul></li>
             <li>Daily rotation of “Sentry Duty”.</li>
             <li><ul>
                 <li>Walk-up/email/IM queries.</li>
                 <li>Issues in production.</li>
                 <li>Triaging incoming bugs.</li>
                 <li>Issues with build tooling and dev/test environments.</li>
                 <li>If there's any time left over they will work in improvements, not main task.</li>
             </ul></li>
             <li>Do DevOps.</li>
             <li>People hate being on sentry duty.</li>
             <li>Folks start to see that they are learning about their system and their customers and stakeholders by taking part in this activity.</li>
           </ul>
         </aside>
       </section>

       <section>
         <h1>Team Size</h1>
         <p>(...and the importance of knowledge management.)</p>

         <div class="left fragment" data-fragment-index="1">
           <p>There are <em>n=3</em> people on the team, Alice, Bob and Quentin. Quentin asks a question. Someone on the team knows the answer. There are 4 ways he can find the information:
           <ol>
             <li><strong>AQ</strong>: by asking Alice who tells him immediately.</li>
             <li><strong>BQ</strong>: by asking Bob who tells him immediately.</li>
             <li><strong>BAQ</strong>: by asking Alice who has to ask Bob.</li>
             <li><strong>ABQ</strong>: by asking Bob who has to ask Alice.</li>
           </ol>
         </div>

         <div class="right">
           <table class="fragment" data-fragment-index="2" >
             <thead><tr><th>n</th><th>possible interactions</th></tr></thead>
             <tbody>
               <tr><td>2</td><td>1</td></tr>
               <tr><td>3</td><td>4</td></tr>
               <tr><td>4</td><td>15</td></tr>
               <tr><td>5</td><td>64</td></tr>
               <tr class="fragment" data-fragment-index="3"><td>6</td><td>325</td></tr>
               <tr class="fragment" data-fragment-index="3" ><td>7</td><td>1956</td></tr>
               <tr class="fragment" data-fragment-index="3" ><td>8</td><td>13 699</td></tr>
               <tr class="fragment" data-fragment-index="3" ><td>9</td><td>109 600</td></tr>
               <tr class="fragment" data-fragment-index="4" ><td>10</td><td>986 409</td></tr>
               <tr class="fragment" data-fragment-index="4" ><td>11</td><td>9 864 100</td></tr>
               <tr class="fragment" data-fragment-index="4" ><td>12</td><td>108 505 111</td></tr>
               <tr class="fragment" data-fragment-index="4" ><td>13</td><td>1 302 061 344</td></tr>
             </tbody>
           </table>
         </div>

         <aside class="notes">
           <ul>
             <li>Dysfuncitonal team</li>
             <li><ul>
                 <li>13 people on team.</li>
                 <li>No formal knowledge management.</li>
                 <li>Specialists.</li>
             </ul></li>
             <li>Bringing on new people was hard.</li>
             <li><ul>
                 <li>Effort to document.</li>
                 <li>Sharing and formalising personal scripts.</li>
                 <li>Walk-the-board stand-up.</li>
             </ul></li>
             <li>Big teams are bad.</li>
             <li>Still have problems with a large team. Slipping back to old behaviours under stress.</li>
             <li>Trialling sub-teams.</li>
           </ul>
         </aside>
       </section>

       <section>
         <section>
           <h1>The Fork In The Road</h1>
           <p>(...and finding our way back.)</p>
           <div class="middle">
             <img src="fork.jpg" width="30%"/>
           </div>
           <footer>
             <a href="http://www.geograph.org.uk/photo/1005053">Photo</a> &copy;
             <a href="http://www.geograph.org.uk/profile/1904">Richard Croft on geograph.org.uk</a>.
             License <a href="https://creativecommons.org/licenses/by/2.0/">CC BY 2.0</a>.
           </footer>
         </section>

         <section class="middle">
           <div>
             <h1>Early 2013</h1>
           </div>
         </section>

         <section class="middle">
           <div>
             <h1>Our cloud was Diablo</h1>
             <p>(...from September 2011 and 30K LoC proprietary patches.)</p>
           </div>
         </section>

         <section class="middle">
           <div>
             <h1>We wanted Grizzly</h1>
             <p>(...and <strike>Quantum</strike> Neutron.)</p>
           </div>
         </section>

         <section class="middle">
           <div>
             <h1>0</h1>
             <p>(...the number of upstream contributions that we had.)</p>
           </div>
         </section>

         <section class="middle">
           <div>
             <h1>Bravo</h1>
             <p>(...a new project to deploy a grizzly-cloud.)</p>
           </div>
         </section>

         <section class="middle">
           <div>
             <h1>Time</h1>
           </div>
         </section>

         <section class="middle">
           <div>
             <h1>Priority</h1>
           </div>
         </section>

         <section class="middle">
           <div>
             <h1>Don't</h1>
           </div>
         </section>

         <section class="middle">
           <div>
             <h1><strike>Don't</strike> Be careful</h1>
           </div>
         </section>
       </section>

       <section data-background="river-mouth.jpg" class="white">
         <section>
           <div class="middle">
             <div>
               <h1>The River Mouth</h1>
               <p>(...the journey upstream begins.)</p>
             </div>
           </div>

           <footer>
             <a href="http://www.flickr.com/photos/47897534@N00/428443306/">Background photo</a> &copy;
             <a href="http://www.flickr.com/people/47897534@N00">greenacre8 on flickr.com</a>.
             License <a href="https://creativecommons.org/licenses/by/2.0/">CC BY 2.0</a>.
           </footer>
         </section>

         <section class="middle">
           <div>
             <h1>Some practices</h1>
           </div>
           <aside class="notes">
             <ul>
               <li>IRC / mailing list sharing.</li>
             </ul>
           </aside>
         </section>

         <section class="middle">
           <div>
             <img src="hands-up.jpg"/>
           </div>
         </section>

         <section class="middle">
           <div>
             <img src="doughnut.jpg"/>
           </div>
         </section>

         <section class="middle">
           <div>
             <h1>Technical Debt</h1>
           </div>
         </section>

         <section class="middle">
           <div>
             <h1>git-upstream</h1>
             <h6><a href="https://git.openstack.org/cgit/stackforge/git-upstream">https://git.openstack.org/cgit/stackforge/git-upstream</a></h6>
             <p>(...some tooling for working with local patches in a gerrit workflow.)</p>
           </div>
         </section>
       </section>

       <section>
         <div class="middle">
           <div>
             <blockquote>
               “My goal for the next six months is to commit as much code upstream as I would have committed in an afternoon in my last job.”
             </blockquote>
           </div>
         </div>
       </section>

       <section data-background="salmon-upstream.jpg" class="white">
         <div class="middle">
           <div>
             <h1>Flow</h1>
             <p>(...and integration.)
           </div>
         </div>

         <aside class="notes">
           <ul>
             <li></li>
             <li><ul>
                 <li>Previous quote is not a bad thing. Indicates we're making progress.</li>
                 <li>Writing code is hard. Writing code that works with other code is harder. Writing code that works with other code that is unknown to you, is changing fast and is owned by another team is hardest.</li>
                 <li>Rigorous peer review is tough to take especially when you don't know the cultural norms of the group.</li>
             </ul></li>
             <li>Realisation that the code is improved by this process.</li>
             <li><ul>
                 <li>Persevere.</li>
                 <li>Be disciplined and ruthless about accepting local patches.</li>
                 <li>Measure and track. But don't target. Count reviews per person. Per patch: TTFR, TTFCR. Discuss good and bad patches and what could be done better.</li>
             </ul></li>
             <li>Integrated code &gt; code.</li>
             <li>Patchset 44.</li>
             <li>At least it's getting attention. Says as much about coordination, communication and cohesion within the core team as it does about the code under review. Review the learning gained by looking at the first patchset.</li>
           </ul>
         </aside>

         <footer>
           <a href="http://commons.wikimedia.org/wiki/File:Salmon_swimming_upstream_in_Ketchikan_Creek_2.jpg">Background photo</a> &copy;
           <a href="http://commons.wikimedia.org/wiki/User:Wknight94">Wknight94 on commons.wikimedia.org</a>.
           License <a href="http://creativecommons.org/licenses/by-sa/3.0/deed.en">CC BY-SA 3.0</a>.
         </footer>

       </section>

       <section>
         <h1>Dam</h1>
         <p>(...n.)</p>
         <div class="middle">
           <img src="salmon-ladder.jpg"/>
         </div>
         <aside class="notes">
           <ul>
             <li>What do you do when you really can't get something accepted upstream?</li>
             <li><ul>
                 <li>At all?</li>
                 <li>In a timely fashion?</li>
                 <li></li>
             </ul></li>
             <li>Live migration of non-active states.</li>
             <li><ul>
                 <li>Clear policy. Disciplined and ruthless about what you'll accept.</li>
                 <li>Consider: area of code impacted: is it moving quickly upstream? are there extension points you can use (or create)?</li>
                 <li>Tooling: git-upstream.</li>
             </ul></li>
             <li>If you have to diverge do it thoughtfully.</li>
             <li>Some patches have been carried for &gt; 1 year and have to rebase every month or so.</li>
             <li>Made us more careful about what we commit to in a release so we're not under pressure to get something in quickly.</li>
           </ul>
         </aside>
       </section>

       <section data-background="salmon-waterfall.jpg">
         <div class="middle">
           <div>
             <h1>Waterfalls</h1>
             <p>(...and dealing with uncertainty.) </p>
           </div>
         </div>
         <aside class="notes">
           <ul>
             <li>Most corporate processes are waterfall.</li>
             <li><ul>
                 <li>Even those that claim to be agile. Test sprint anyone?</li>
                 <li>These processes don't deal very well with uncertainty.</li>
                 <li>There's plenty of uncertainty about when something will land when you're working upstream.</li>
             </ul></li>
             <li>That doesn't mean we can't provide forecasts.</li>
             <li><ul>
                 <li>Gathered data about whole end-to-end process. From request to production deployment. Draw a cumulative flow diagram.</li>
                 <li>Look at the distribution of the end-to-end times.</li>
                 <li>Use MC simulation to make a forecast for your next release.</li>
             </ul></li>
             <li>Uncertainty at the patch level does not mean you can't forecast..</li>
             <li>Just because you can forecast doesn't mean you'll be listened to :) Execs have trouble parsing confidence levels.</li>
             <li>Language is powerful. Early, likely and latest dates is easier to understand.</li>
           </ul>
         </aside>
       </section>

       <section>
         <aside class="notes">
           <ul>
             <li></li>
             <li><ul>
                 <li></li>
                 <li></li>
                 <li></li>
             </ul></li>
             <li></li>
             <li><ul>
                 <li></li>
                 <li></li>
                 <li></li>
             </ul></li>
             <li></li>
             <li></li>
             <li></li>
           </ul>
         </aside>
       </section>


      </div>
      <img class="helion" src="helion.png"/>
      <img class="hp" src="hp.png"/>
    </div>
    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>
    <script>
      Reveal.initialize({
      width: 1920,
      height: 1080,
      controls: false,
      progress: true,
      history: true,
      center: false,
      transition: 'cube',
      backgroundTransition: 'concave',
      dependencies: [
      { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
      { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
      { src: 'plugin/notes/notes.js' }
      ]
      });
    </script>

    <script type="text/javascript" async src="//platform.twitter.com/widgets.js"></script>

    <style>
      section {height: 100%;}
      .reveal section footer {position: absolute; width:100%; bottom: 10px; font-size:80%; vertical-align:middle;}
      .reveal section footer img {margin:0}
      .middle > *, .left, .right {position: absolute; left: 50%; top: 50%; transform: translate(-50%,-50%);}
      div.left {text-align:center; padding:0 25px 0 50px; transform: translate(-100%, -50%); width: 47%}
      div.right {text-align:center; padding:0 50px 0 25px; transform: translate(0%, -50%); width: 47%}
      .reveal table td, .reveal table th {text-align:right;}
      .reveal table {margin: 0 auto;}
      .reveal.cube .slides section {padding: 60px;}
      .helion, .hp {height: 7%; float: right;}
      .reveal img.hp {position:absolute; padding: 0 5px 5px 0; bottom: 0%; right: 0%;}
      .reveal section.white, .reveal section.white h1 {color:white;}
    </style>

  </body>
</html>
